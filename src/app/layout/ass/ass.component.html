<div [@routerTransition]>
  <app-page-header [heading]="'Abstract State Space'" [icon]="'fa fa-sitemap'"></app-page-header>

  <div class="row">
      <div class="col-lg-7">
        <div class="card mb-3">
            <div class="card-header">State Space Viewer</div>
            <div class="card-block">
              <div class="col text-right">
                <div ngbDropdown class="d-inline-block dropdown">
                  <button class="btn btn-outline-primary" ngbDropdownToggle>State Filters</button>
                  <div ngbDropdownMenu>
                    <button class="dropdown-item" (click)="filterService.collapseChains(cy)">Collapse chains</button>
                    <button class="dropdown-item" (click)="filterService.removeFilters(cy)">Remove all filters</button>
                  </div>
              </div>
            </div>
            <div id="cy">
            </div>
          </div>
          </div>
      </div>
      <div class="col-lg-5">
        <div class="card mb-3">
            <div class="card-header">Heap State {{nodeId}} </div>

            <div class="card-block">
                <div id="cy2">

                </div>
                <div>
                <button type="button" class="btn btn-info" *ngIf="stmt">{{stmt}}</button>
                <button type="button" class="btn btn-success"  style="margin-bottom:4px;white-space: normal;" *ngIf="apPresent">{{ap}}</button>
                </div>
            </div>
          </div>
      </div>
    </div>

  <div *ngIf="showStateSpace"> <!-- Check here is extended report is necessary!!!-->
    <div id="loading" *ngIf="notLoaded">
      <p>Loading state space...</p>
      <!--<p id="loadTroubleshoot">
        <abbr title="Large state spaces might require a few seconds. Furthermore note that this page has to be accessed from a running http server.">
      Why does this take so long?
      <abbr/>
    </p>-->

      <span class="fa fa-refresh fa-spin"></span>
    </div>

  <div id="about-content" *ngIf="displayAboutFlag">
    <p>Key:</p>
    <p>
    <!--<ul>
      <li>White: initial state</li>
      <li>Red: final state</li>
      <li>Green: states merging at least two branches</li>
      <li>Yellow: materialization edges</li>
      <li>Blue: Edges summarizing a chain of states</li>
      <li>Gray: all other states and edges</li>
    </ul>-->
    </p>

    <p>State space generated by <a href="https://github.com/moves-rwth/attestor">Attestor <i class="fa fa-external-link"></i></a>. </p>

    <p>This app was made using <a target="_blank" href="http://js.cytoscape.org">Cytoscape.js <i class="fa fa-external-link"></i></a>. </p>

    <p>Design inspired by <a target="_blank" href="http://www.wineandcheesemap.com/">wineandcheesemap <i class="fa fa-external-link"></i></a>. </p>
  </div>
</div>
